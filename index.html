<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>CircularKheti â€“ Feedback & Preorder</title>

<style>
body{
margin:0;
font-family:Arial;
background:url('Graphic_4.jpg') no-repeat center center fixed;
background-size:contain
background-repeat: no-repeat;
background-position: center;;
}

/* overlay for opacity */
body::before{
content:"";
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(246,255,248,0.92);
z-index:-1;
}

.screen{
display:none;
padding:20px;
padding-bottom:90px; /* FIX footer overlap */
min-height:100vh;
}
.active{display:block}

h2{text-align:center}

input,select,textarea{
width:70%;
padding:12px;margin-top:10px;
border-radius:10px;border:1px solid #ccc
}

textarea{resize:none}

.error{color:red;font-size:13px}

.btn{
background:#4CAF50;color:#fff;border:0;
width:100%;padding:14px;border-radius:12px;
font-size:16px;margin-top:15px
}
.btn:disabled{background:#9e9e9e}

.btn.back{background:#757575}

.star span{font-size:28px;color:#ccc;cursor:pointer}
.star .on{color:#fbc02d}

.tabs{display:flex;gap:10px;margin-top:20px}
.tab{
flex:1;text-align:center;padding:12px;
background:#e8f5e9;border-radius:10px
}
.tab.active{background:#4CAF50;color:white}

/* small logo on every screen */
.top-logo{
position:fixed;
top:8px;
right:10px;
z-index:20;
}
.top-logo img{
height:32px;
}

/* footer */
.footer{
position:fixed;
bottom:10px;width:100%;
text-align:center
}
.footer img{height:35px}

/* THANK YOU */
#thanks{
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(255,255,255,0.95);
display:none;
justify-content:center;
align-items:center;
z-index:30;
}
.thank-card{
text-align:center;
animation:pop .5s ease;
}
.thank-card img{
height:80px;
margin-bottom:15px;
display:block;
margin-left:auto;
margin-right:auto;
}
@keyframes pop{
from{transform:scale(0.8);opacity:0}
to{transform:scale(1);opacity:1}
}
</style>
</head>

<body>

<!-- SMALL LOGO -->
<div class="top-logo">
<img src="CK logo.png.jpg">
</div>

<!-- THANK YOU -->
<div id="thanks">
<div class="thank-card">
<img src="CK logo.png.jpg" id="thankLogo">
<h2 id="thankText">Thank you!</h2>
<p id="thankSub"></p>
</div>
</div>

<!-- FEEDBACK -->
<div class="screen active" id="f1">
<h2>Thank you tasting fresh guavas/à¤ªà¥‡à¤°à¥‚/à¤…à¤®à¤°à¥‚à¤¦ from CircularKheti Farms</h2>
<h2>Help us grow with your experience</h2>
<h1>Feedback</h1>

<input id="fname" placeholder="Your Name">
<div class="error" id="nameErr"></div>

<input id="fmobile" placeholder="WhatsApp Number">
<div class="error" id="mobErr"></div>

<h3>Taste of guava *</h3><div class="star" id="taste"></div>
<h3>Softness of guava *</h3><div class="star" id="soft"></div>
<h3>Overall order experience *</h3><div class="star" id="overall"></div>
<div class="error" id="rateErr"></div>

<!-- NEW COMMENT -->
<textarea id="fcomment" maxlength="50"
placeholder="Comment / Suggestion (max 50 letters)"></textarea>

<button class="btn" id="fsubmit" disabled>Submit</button>

<div class="footer">
<img src="CK logo.png.jpg" onclick="goInfo()">
</div>
</div>

<!-- CHOICE -->
<div class="screen" id="choice">
<h2>Next Step</h2>

<div class="tabs">
<div class="tab active" onclick="openShare()">Share</div>
<div class="tab" onclick="openPreorder()">Preorder</div>
</div>

<div id="share">
<input id="link" readonly> <!-- LOCKED -->
<button class="btn" onclick="copy()">Copy Link</button>
</div>

<div class="footer">
<img src="CK logo.png.jpg" onclick="goInfo()">
</div>
</div>

<!-- PREORDER -->
<div class="screen" id="p1">
<h2>Order Now</h2>

<input id="pname" placeholder="Your Name">
<input id="pmobile" placeholder="Mobile Number">

<select id="pcity">
<option value="">City *</option>
<option>Pune</option>
<option>Mumbai</option>
<option>Nashik</option>
</select>
<div class="error" id="cityErr"></div>

<select id="pplace">
<option value="">Place *</option>
<option>Society A</option>
<option>Society B</option>
</select>
<div class="error" id="placeErr"></div>

<select id="ptype">
<option value="">Type of Guava *</option>
<option>Half Ripen</option>
<option>Fully Ripen</option>
<option>Mix</option>
</select>
<div class="error" id="typeErr"></div>

<input type="date" id="pdate"><br>

<input id="pqty" type="number" min="1" max="25" step="1" placeholder="Quantity">
<b> Kg</b>
<div class="error" id="qtyErr"></div>

<p><b>Final Price:</b> â‚¹<span id="price">0</span></p>

<p><b>Payment:</b> CASH / UPI on delivery</p>

<p><b>Instructions:</b>  
Please carry your own cloth bag.
Contact person: Sameer or Nilesh.</p>

<!-- NEW COMMENT -->
<textarea id="pcomment" maxlength="50"
placeholder="Comment / Suggestion (max 50 letters)"></textarea>

<button class="btn" id="psubmit">Confirm Preorder</button>
<button class="btn back" onclick="goBack()">â¬… Back</button>

<div class="footer">
<img src="CK logo.png.jpg" onclick="goInfo()">
</div>
</div>

<!-- INFO -->
<div class="screen" id="info">
<h2>ðŸŒ± About CircularKheti</h2>
<p>Direct from farme model! Eat fresh Stay healthy!.</p>
<button class="btn back" onclick="goBack()">â¬… Back</button>
</div>

<script>
let ratings={},historyStack=["f1"];
const RATE_PER_KG=60;

pqty.oninput=()=>{
if(pqty.value>=1 && pqty.value<=10){
price.innerText=pqty.value*RATE_PER_KG;
}else price.innerText=0;
};

function createStars(id){
let d=document.getElementById(id);
for(let i=1;i<=5;i++){
 let s=document.createElement("span");
 s.innerHTML="â˜…";
 s.onclick=()=>{
 ratings[id]=i;
 d.querySelectorAll("span").forEach(x=>x.classList.remove("on"));
 for(let j=0;j<i;j++)d.children[j].classList.add("on");
 validateFeedback();
 }
 d.appendChild(s);
}
}
["taste","soft","overall"].forEach(createStars);

fname.oninput=fmobile.oninput=validateFeedback;

function validateFeedback(){
let ok=true;

if(fname.value.length<3 || /\d/.test(fname.value)){
 nameErr.innerText="Enter valid name"; ok=false;
}else nameErr.innerText="";

if(!/^[6-9]\d{9}$/.test(fmobile.value)){
 mobErr.innerText="Enter valid 10-digit mobile"; ok=false;
}else mobErr.innerText="";

if(!ratings.taste||!ratings.soft||!ratings.overall){
 rateErr.innerText="Please rate all fields"; ok=false;
}else rateErr.innerText="";

fsubmit.disabled=!ok;
}

fsubmit.onclick=()=>{
showThanks(
"Thank you for feedback",
"",
true,
2000,
()=>{
pname.value=fname.value;
pmobile.value=fmobile.value;
link.value=location.href;
navigate("choice");
});
};

psubmit.onclick=()=>{
let ok=true;
if(!pcity.value){cityErr.innerText="Required";ok=false}else cityErr.innerText="";
if(!pplace.value){placeErr.innerText="Required";ok=false}else placeErr.innerText="";
if(!ptype.value){typeErr.innerText="Required";ok=false}else typeErr.innerText="";
if(!pqty.value || pqty.value<1 || pqty.value>10){
 qtyErr.innerText="Enter 1â€“10 Kg";ok=false;
}else qtyErr.innerText="";

if(!ok)return;

showThanks(
"Thank you!",
"Direct from Farm<br>Support farm, Support rural economy",
true,
4000,
()=>{navigate("choice");}
);
};

function showThanks(title,sub,showLogo,time,cb){
thankText.innerHTML=title;
thankSub.innerHTML=sub;
thankLogo.style.display=showLogo?"block":"none";
thanks.style.display="flex";
setTimeout(()=>{
thanks.style.display="none";
cb();
},time);
}

function show(id){
document.querySelectorAll(".screen")
.forEach(x=>x.classList.remove("active"));
document.getElementById(id).classList.add("active");
}
function navigate(id){historyStack.push(id);show(id)}
function goBack(){
if(historyStack.length>1){
historyStack.pop();
show(historyStack[historyStack.length-1]);
}
}

function openShare(){setTab(0);navigate("choice")}
function openPreorder(){setTab(1);navigate("p1")}

function setTab(i){
document.querySelectorAll(".tab")
.forEach(x=>x.classList.remove("active"));
document.querySelectorAll(".tab")[i]
.classList.add("active");
}

function copy(){
navigator.clipboard.writeText(link.value);
alert("Link copied!");
}

function goInfo(){navigate("info")}
</script>

</body>
</html>



